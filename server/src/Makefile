all: server.exe

server.exe: main.o syntaxe.o answer.o
	gcc $^ -o $@ -L. -lrequest -lparser
	@echo "Pensez Ã  faire : export LD_LIBRARY_PATH=. !"

syntaxe.o: syntaxe.c
	gcc -Wall -g -o $@ -c $<

answer.o: answer.c
	gcc -Wall -g -o $@ -c $<

api.o: api.c
	gcc -Wall -g -o $@ -c $<

main.o: main.c
	gcc -Wall -g -o $@ -c $<

clean:
	@rm *.o
	@echo "Done"

hosts:
	@sudo echo "127.0.0.2	hidden-site" >> /etc/hosts
	@sudo echo "127.0.0.3	master-site" >> /etc/hosts